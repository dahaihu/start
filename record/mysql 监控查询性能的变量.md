# mysql 监控查询性能的变量

MySQL 的 SHOW STATUS 命令会展示两个容易混淆的数字，导致人们会问"这是什么"：

1. `Handler_read_rnd`
2. `Handler_read_rnd_next`

`Handler_read_rand` 计数的是函数`handler::rnd_pos()`的调用次数，这个函数会根据`fix position`来从表中获取一行，是一个随机读。`position`对于不同的存储引擎的含义是不同的。对于`MyISAM`，`position`意味着到文件头部开始的一个字节偏移量；对于`InnoDB`，这个意味着根据主键获取表中的一条记录。

`Handler_read_rnd_next` 表示的是函数`handler::rnd_next()`被调用的次数。这个基本上是一个游标的操作: 读取表(不是索引)中的`下一行`，这个操作会移动游标到下一次读取的位置，从而在下次调用的时候，可以获取到下一行。

为什么这两个函数会被调用？通常在排序操作进行的时候，会收集许多元组和其对应的`position`值，按照某种标准对这些元组进行排序(排序的操作应该不会是在获取表中所有记录的时候，再按照标准进行排序的，因为通常的排序字段比较少，如果把全部数据取出来进行排序的操作太耗费内存了)，然后会遍历排序好的列表，根据`position`(在此就是排序的标准的字段)来获取表记录的时候会进行`Handler_read_rnd`的操作。这个通常会发生在根据表中的随机指针获取行，虽然这个在数据全部都在内存的时候并不会造成随机的IO。通常发生在全表或者部分表的扫描的时候，会进行`Handler_read_rnd_next`的操作。



